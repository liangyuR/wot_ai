# 🎮 坦克世界 AI 数据采集工具 - 使用说明

## 📋 系统要求

- **操作系统**: Windows 10/11 (64位)
- **磁盘空间**: 至少 5GB 可用空间（用于存储录制数据）
- **游戏**: 《坦克世界》客户端

## 🚀 快速开始

### 1. 解压文件
将 `WoT_DataCollector.zip` 解压到任意目录（推荐解压到 D 盘或 E 盘）

### 2. 启动工具
**重要**: 必须以管理员权限运行！

**右键点击** `🎮 启动数据采集.bat` → 选择 **"以管理员身份运行"**

⚠️ **为什么需要管理员权限？**
- 录制键盘输入需要 Windows 系统权限
- 如果不以管理员运行，键盘操作将无法被记录

### 3. 配置参数

在打开的配置窗口中设置：

#### 屏幕分辨率
选择你的显示器分辨率（常见选项）：
- ✅ **1920x1080 (Full HD)** - 最常见，文件最小
- ✅ **2560x1440 (2K)** - 高清显示器
- ✅ **3440x1440 (超宽屏)** - 超宽显示器
- ✅ **3840x2160 (4K)** - 4K 显示器

💡 **如何查看我的分辨率？**
- 桌面右键 → 显示设置 → 查看"分辨率"

#### 录制帧率
- **5 FPS** (推荐) - 省空间，适合长时间录制
- **10 FPS** - 平衡方案
- **15 FPS** - 更流畅，但占用空间大

💡 **建议使用 5 FPS**，AI 训练不需要太高帧率

点击 **"💾 保存配置"** 按钮

### 4. 开始录制

#### 方式一：从配置界面启动
点击 **"🎬 开始录制"** 按钮

#### 方式二：直接启动
运行 `record_main.py`（前提是已经配置过）

#### 录制流程
1. 启动《坦克世界》并进入战斗
2. 按 **F9 键** 开始录制
3. 正常游戏 **5-10 分钟**（建议每场战斗录一次）
4. 按 **F10 键** 停止录制并自动保存
5. 可以再次按 **F9 键** 开始新的录制（无需重启程序）
6. 按 **Ctrl+C** 或关闭窗口退出程序

⚠️ **注意事项**：
- 至少录制 3-5 秒才能保存数据
- 游戏过程中尽量展示各种操作（移动、瞄准、射击）
- 建议录制不同地图、不同坦克的战斗
- **支持连续录制多场战斗**，每场战斗单独保存

### 5. 数据位置

录制的数据保存在：
```
WoT_DataCollector/
└── data/
    └── recordings/
        └── session_20251025_HHMMSS/    # 每次录制生成一个会话文件夹
            ├── frames/                  # 图片帧
            │   ├── frame_000000.jpg
            │   ├── frame_000002.jpg
            │   └── ...
            ├── actions.json             # 操作记录（键盘、鼠标）
            └── meta.json                # 元数据（分辨率、FPS等）
```

## 📊 存储空间参考

| 分辨率 | 5 FPS 录制 | 每分钟 | 每小时 | 10 场战斗 (约 2 小时) |
|--------|-----------|--------|--------|---------------------|
| 1920x1080 | 实际保存 2.5 FPS | ~25 MB | ~1.5 GB | ~3 GB |
| 2560x1440 | 实际保存 2.5 FPS | ~40 MB | ~2.4 GB | ~4.8 GB |
| 3440x1440 | 实际保存 2.5 FPS | ~50 MB | ~3 GB | ~6 GB |
| 3840x2160 | 实际保存 2.5 FPS | ~80 MB | ~4.8 GB | ~9.6 GB |

💡 **为什么实际保存是 2.5 FPS？**
- 录制时按 5 FPS 捕获画面
- 但每 2 帧才保存 1 帧到硬盘 (frame_step=2)
- 这样可以节省 50% 的存储空间

**建议录制 20-50 场战斗**，总容量约 **50-150 GB**

## ⌨️ 快捷键说明

| 按键 | 功能 |
|------|------|
| **F9** | 开始录制 |
| **F10** | 停止录制 |
| **Ctrl+C** | 退出程序 |

💡 **提示**：可以在一次运行中录制多场战斗，每场战斗按 F9 开始，F10 结束，最后按 Ctrl+C 或关闭窗口退出。

## ❓ 常见问题

### Q1: 键盘按键没有被录制？
**A**: 必须以管理员权限运行！
- 右键 `🎮 启动数据采集.bat` 
- 选择 **"以管理员身份运行"**
- 检查 `actions.json` 文件，`keys` 字段不应该全是空数组 `[]`

### Q2: 录制时游戏卡顿？
**A**: 降低 FPS 设置
- 在配置界面改为 **5 FPS** 或更低
- 如果仍然卡顿，检查磁盘写入速度（建议使用 SSD）

### Q3: 找不到游戏窗口？
**A**: 使用"全屏模式"
- 当前工具使用全屏捕获模式
- 确保分辨率设置与你的显示器一致

### Q4: 如何修改配置？
**A**: 两种方式
1. 再次运行 `launcher.bat`，在 GUI 中修改
2. 直接编辑 `configs/client_config.yaml` 文件

### Q5: 录制的图片是黑色的？
**A**: 
- 确保游戏是**窗口化全屏**或**无边框窗口**模式
- 某些游戏使用硬件加速，全屏独占模式可能无法捕获

### Q6: 程序无法启动？
**A**: 检查以下项目
1. 是否完整解压（不要在压缩包内直接运行）
2. 路径中是否包含中文或特殊字符（建议使用纯英文路径）
3. 是否有杀毒软件阻止（添加到白名单）

### Q7: 如何查看录制是否成功？
**A**: 检查以下内容
1. `data/recordings/` 下是否有新的 `session_XXX` 文件夹
2. 打开 `meta.json` 查看 `total_frames` 是否大于 0
3. 打开 `frames/` 文件夹查看是否有图片
4. 打开 `actions.json` 查看 `keys` 字段是否有内容

## 📤 数据提交

### 准备数据
录制完成后，你的 `data/recordings/` 目录下会有多个会话文件夹：
```
data/recordings/
├── session_20251025_140000/
├── session_20251025_150000/
├── session_20251025_160000/
└── ...
```

### 打包发送
1. 将整个 `recordings` 文件夹压缩成 ZIP
2. 通过网盘（百度网盘、OneDrive等）分享给项目负责人
3. 或者使用 USB 硬盘拷贝

💡 **建议**: 录制 10-20 场战斗后打包一次，避免单个文件过大

## 🎯 录制建议

为了获得高质量的训练数据，请：

### ✅ 推荐做法
- 录制**完整的战斗**（从开始到结束）
- 尝试**不同的坦克类型**（重坦、中坦、轻坦、TD、火炮）
- 录制**不同的地图**
- 展示**多样化的操作**（进攻、防守、侦查、狙击）
- 录制**不同的战斗阶段**（开局、中期、残局）

### ❌ 避免做法
- 不要录制在车库中的操作
- 不要录制加载界面
- 不要录制暂停/设置菜单
- 不要录制异常情况（卡顿、崩溃）

### 💎 加分项
- 录制精彩操作（如漂亮的狙击、完美的走位）
- 录制团队配合场景
- 录制各种战术应用

## 🆘 获取帮助

如果遇到问题：
1. 先查看本文档的"常见问题"部分
2. 检查 `logs/` 目录下的日志文件
3. 联系项目负责人并提供：
   - 错误截图
   - `logs/` 目录下的最新日志文件
   - 你的系统信息（Windows 版本、分辨率等）

## 📜 更新日志

### v1.0 (2025-10-25)
- ✅ 初始版本
- ✅ 图形化配置界面
- ✅ 支持多种分辨率
- ✅ 可调节 FPS
- ✅ 自动存储估算
- ✅ 管理员权限检测

---

**感谢你为 AI 训练贡献数据！** 🎉

你的每一场录制都在帮助训练更智能的坦克 AI！

